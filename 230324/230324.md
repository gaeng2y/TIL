# Swift에서 함수형 프로그래밍

Swift는 함수형 프로그래밍 패러다임을 지원하는 멀티 패러다임 프로그래밍 언어입니다. 

함수형 프로그래밍은 프로그램을 순수 함수의 조합으로 표현하고, 상태 변경과 가변 데이터를 피하는 것에 초점을 두는 프로그래밍 스타일입니다.

## 주요 개념과 도구

1. ****순수 함수****: 동일한 입력에 대해 항상 동일한 출력을 반환하며, 부작용이 없는 함수

2. ****고차 함수****: 함수를 인자로 받거나 함수를 반환하는 함수 (예: map, filter, reduce)

3. ****불변성****: 데이터 변경을 최소화하고, 대신 불변 객체를 사용하여 상태를 표현

4. ****함수 합성****: 여러 함수를 연결하여 새로운 함수를 생성하는 기법

5. ****커링****: 여러 개의 인자를 받는 함수를 한 개의 인자를 받는 함수들의 연속으로 바꾸는 것

### 순수 함수

Swift 함수형 프로그래밍에서 순수 함수는 부작용(side-effect)이 없는 함수를 말합니다. 이러한 함수는 입력값만을 받아서 출력값을 반환하며, 함수 내부에서 외부 상태를 변경하지 않습니다. 이러한 특성 때문에 순수 함수는 예측 가능하며, 디버깅 및 테스트가 쉽습니다.

순수 함수는 함수형 프로그래밍에서 핵심적인 개념 중 하나입니다. 

Swift에서 순수 함수를 구현하려면 다음과 같은 규칙을 따르면 됩니다.

```swift
var index = 0
func ~~
for i in 0..<10 {
	index += i
}
}
```

함수는 항상 동일한 입력값에 대해 동일한 출력값을 반환해야 합니다.

함수는 외부에서 전달된 인자를 변경하지 않아야 합니다.

함수는 외부 상태에 영향을 미치지 않아야 합니다.

아래는 Swift에서의 순수 함수 예시입니다.

```swift
func multiplyByTwo(_ x: Int) -> Int {
	return x * 2
}
```

위의 함수는 입력값을 받아 2배를 곱한 값을 반환하는 순수 함수입니다. 이 함수는 부작용이 없기 때문에 항상 동일한 입력에 대해 동일한 출력을 보장합니다.

순수 함수를 사용하면 프로그램의 안정성과 유지보수성이 향상됩니다. 이러한 이유로 Swift의 함수형 프로그래밍에서는 순수 함수를 최대한 활용하려고 노력합니다.

### Composition

Composition(합성)은 함수형 프로그래밍에서 사용되는 기술 중 하나로, 두 개 이상의 함수를 연결하여 새로운 함수를 생성하는 것을 말합니다.

예를 들어, Swift에서 다음과 같은 두 개의 함수가 있다고 가정해봅시다:

```swift
func double(_ x: Int) -> Int {
	return x * 2
}

func increment(_ x: Int) -> Int {
	return x + 1
}
```

이 두 함수를 Composition을 사용하여 합성된 함수를 만들어 볼 수 있습니다.

```swift
let doubleThenIncrement = increment • double
let result = doubleThenIncrement(3) // 7
```

위 코드에서 • 연산자는 함수 합성 연산자입니다. 

increment • double는 double 함수를 먼저 실행한 후, 그 결과를 increment 함수에 전달하여 실행하는 새로운 함수를 만드는 것을 의미합니다.

이렇게 합성된 함수는 기존 함수들의 재사용성을 높이며, 코드의 가독성도 향상시킵니다. 또한, 함수의 재사용성이 높아지므로, 코드의 중복을 줄일 수 있습니다.

Composition은 두 개 이상의 함수를 연결하는 것 뿐만 아니라, 여러 개의 함수를 연속적으로 합성하여 새로운 함수를 만들 수 있습니다. 따라서, 함수형 프로그래밍에서는 Composition을 활용하여 더욱 복잡한 문제를 해결하는 함수를 만들 수 있습니다.

### Currying

Currying은 함수형 프로그래밍에서 사용되는 기술 중 하나로, 여러 개의 인자를 받는 함수를 한 개의 인자를 받는 함수들의 연속으로 바꾸는 것을 말합니다.

예를 들어, Swift에서 다음과 같은 두 인자를 받는 함수가 있다고 가정해봅시다:

```swift
func add(_ x: Int, _ y: Int) -> Int {
	return x + y
}
```

이 함수를 Currying을 사용하여 두 개의 함수로 바꿔볼 수 있습니다. 첫 번째 함수는 첫 번째 인자인 x를 받아들이고, 두 번째 함수는 두 번째 인자인 y를 받아들입니다.

```swift
func add(_ x: Int) -> (Int) -> Int {
	return { y in x + y }
}
```

이제 첫 번째 함수를 호출하여, 두 번째 함수를 반환받아 두 번째 인자를 전달해줄 수 있습니다.

```swift
let add2 = add(2)
let result = add2(3) // 5
add(2, 3)
add(2)(3)
```

위 코드에서 add(2)는 Int를 인자로 받아 Int를 반환하는 함수를 반환하게 됩니다. 이를 add2라는 변수에 할당하고, add2(3)을 호출하여 결과를 얻을 수 있습니다. 이 경우 결과는 5가 됩니다.

이렇게 Currying을 사용하면, 함수의 재사용성이 높아지며, 코드의 가독성도 향상됩니다. 또한, 함수형 프로그래밍에서 람다식과 같은 기술과 함께 사용하면, 코드의 간결성과 유연성도 증가할 수 있습니다.

## 예제

정수 배열에서 짝수를 찾아 그 값을 제곱한 후, 그 결과들을 모두 더하는 작업

### 기존 방식

```swift
let numbers = [1, 2, 3, 4, 5, 6, 7, 8, 9, 10]
var evenSquaresSum = 0
for number in numbers {
	if number % 2 == 0 {
		let square = number * number
		evenSquaresSum += square
	}
}

print(evenSquaresSum) // 출력: 120
```

### 함수형 프로그래밍

```swift
let numbers = [1, 2, 3, 4, 5, 6, 7, 8, 9, 10]

let evenSquaresSum = numbers
											.filter { $0 % 2 == 0 }
											.map { $0 * $0 }
											.reduce(0, +)
print(evenSquaresSum) // 출력: 120
```

함수형 프로그래밍을 사용하면 코드가 간결해지고, 가독성이 높아지며, 부작용을 줄일 수 있습니다.