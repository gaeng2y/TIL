# Concurrency Programming

일을 다른 쓰레드로 보내서 분산처리 하고 싶다.

## 1. 동기 vs 비동기

### 비동기

다른 스레드로 task를 보내고 즉시 리턴(일을 시작 시키고, 작업이 끝날때까지 **“안 기다린다”**. ⇒ 메인 쓰레드가 다른 일 처리를 시작할 수 있다.)

→ 작업을 다른 쓰레드에서 하도록 시킨 후, 그 작업이 끝나길 “안 기다리고” 다음 일을 진행한다.

![Untitled](https://github.com/gaeng2y/TIL/blob/main/230306/230306-1.png)

### 동기

일을 시작 시키고, 뿐만 아니라 작업이 끝날때까지 **“기다린다”**. ⇒ 메인 쓰레드가 다른 일 처리를 시작할 수 없다.)

→ 작업을 다른 쓰레드에서 하도록 시킨 후, 그 작업이 끝나길 “기다렸다가” 다음 일을 진행한다.

![Untitled](https://github.com/gaeng2y/TIL/blob/main/230306/230306-2.png)

### 비동기라는 개념이 필요한 이유는?

대부분은 네트워크 작업 때문에

## 2. 직렬(Serial) vs 동시(Concurrent)

### 직렬

- 메인 쓰레드의 작업을 다른 하나의 쓰레드에게 전달
- 분산처리 시킨 작업을 **“다른 한개의 쓰레드에서”** 처리

![Untitled](https://github.com/gaeng2y/TIL/blob/main/230306/230306-3.png)

### 동시 처리

- 몇개의 쓰레드로 분산 처리
- 분산처리 시킨 작업을 **“다른 여러개의 쓰레드에서”** 처리

![Untitled](https://github.com/gaeng2y/TIL/blob/main/230306/230306-4.png)

### 분산처리 하려는 것이려면, 무조건 “동시 처리”가 좋아 보이는 것 같은데, 왜 직렬 처리가 필요할까?

- 작업에 순서가 필요할 수도 있다.

**직렬 처리**

- 순서가 중요한 작업을 처리할 때 사용

**동시 처리**

- 각자 독립적이지만 유사한 여러개의 작업을 처리할 때 사용

## 3. 왜 동시성 프로그래밍이 필요할까?

비동기란 말과 동시란 말이 같은 말인가?

**아니지**

성능 / 반응성 → 최적화

GCD / Operation

# 비동기 처리가 필요한 이유

네트워크 통신과 비동기 처리

즉, 서버에 데이터를 요청하는 일은 부하가 많이 걸리는 일

물리적인 쓰레드  ==(비슷) NSThread

분산처리를 어떻게 하는지에 대한 코딩 방법 → **비동기 처리 / 동시성 프로그래밍**

작업을 큐에 보내기만 하면,

iOS에서 알아서 여러 쓰레드로 나눠서 분산처리를 한다.

## Queue의 종류

- 직접적으로 쓰레드를 관리하는 개념이 아닌, 큐의 개념을 이용해서, 작업을 분산처리하고 OS에서 ㅇ라아서 쓰레드 숫자를 관리
- 쓰레드보다 더 높은 레벨/차원에서 작업을 처리
- 메인 쓰레드가 아닌 다른 쓰레드에서 작업을 쉽게 비동기적으로 처리하도록 함

### DispatchQueue

(GCD - Grand Central DispatchQueue)

### OperationQueue

## 병렬 vs 동시

![Untitled](https://github.com/gaeng2y/TIL/blob/main/230306/230306-5.png)

### 병렬

물리적인 쓰레드에서 실제 동시에 일을 하는 개념(내부적으로 알아서 동작하기 때문에 개발자가 전혀 신경쓸 필요가 없는 영역)

### 동시성

메인 쓰레드가 아닌 다른 소프트웨어적인 쓰레드에서 동시에 일을 하는 개념

- 물리적인 쓰레드가 알아서 스위칭하면서 일을 처리

# 동기 비동기 개념

## 비동기

작업을 다른 쓰레드에서 하도록 시킨 후, 그 작업이 끝나길 “안 기다리고” 다음 일을 진행한다.

## 동기

작업을 다른 쓰레드에서 하도록 시킨 후, 그 작업이 끝나길 “기다렸다가” 다음 일을 진행한다.

## Blocking vs Non-Blocking

### Blocking

- 제어권 바로 반환하지 않음

### Non-Blocking

- 제어권 바로 반환

[Concurrent Programming With GCD in Swift 3 - WWDC16 - Videos - Apple Developer](https://developer.apple.com/videos/play/wwdc2016/720/)