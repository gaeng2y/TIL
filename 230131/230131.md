# Swift 메모리 관리

참조 형식은 메모리 관리가 필요

[포스팅](https://gaeng2y.medium.com/value-reference-type-756f5bdda0b5) 내용을 참조하며 

Swift에서는 참조 타입을 관리할 때 RC(Reference Counting)을 통해 메모리를 관리하며 ARC 모델을 이용

코드 영역은 프로그램이 실행될 때 코드가 복사되어 올라가는 영역

코드가 실행되며 필요한 내용들을 데이터 / 힙 / 스택 영역에 저장한다.

데이터 영역은 전역변수 / 타입(static,class) 변수. 즉, 공통으로 공유하기 위한 데이터가 저장되며

힙 영역은 동적할당이 되는 데이터. 즉, 크기가 크고, 관리할 필요가 있는 데이터가 저장되며

스택 영역은 함수 실행을 위한 임시적 공간으로, 크기가 작고 빠르게 사용하기 위한 데이터가 저장된다.

* 힙 영역에 할당되는 데이터는 관리를 해야지만, 메모리에서 해제가 됨.
* 할당이 해제되지 않으면 메모리 릭 발생.

# ARC(Automatic Reference Counting)

스위프트의 메모리 관리 모델

class를 작성하면 숨은 변수로 Int 타입의 refCount가 선언되며

인스턴스를 하거나 변수에 할당하면 retain 메소드를 호출하여 refCount를 증가시키며 할당 해제될 때 release를 호출하면 refCount가 -1가 된다.

## [ARC모델의 기반: 소유정책과 참조카운팅]

1. 소유정책 - 인스턴스는 하나이상의 소유자가 있는 경우 메모리에 유지됨
             (소유자가 없으면, 메모리에서 제거)
2. 참조카운팅 - 인스턴스(나)를 가르키는 소유자수를 카운팅